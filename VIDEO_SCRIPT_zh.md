# Lab 5 录屏脚本（中文版）

**时长：不超过 1 分钟**

---

## 第1段：展示可视化（15 秒）

“大家好！这是我在 DSC 106 的 Lab 5 作业。我做的是一个基于年份的项目分布饼图。”

【镜头：展示页面中饼图和图例】

“饼图用不同颜色表示不同年份，图例显示每个年份对应的项目数量。”

---

## 第2段：交互演示（25 秒）

“接下来演示交互功能。”

【鼠标悬停在某个扇区】
“当我把鼠标悬停在某个扇区上，其他扇区会变淡，高亮当前扇区。”

【点击某个扇区】
“点击扇区后，下面的项目列表会被过滤，只显示该年份的项目，同时该扇区会用高亮颜色表示已选中。”

【搜索演示】
“现在我在搜索框输入 ‘robotics’。”
【输入并停顿】
“饼图会联动更新，只保留与搜索词匹配的项目；列表也同步过滤。”

【点击图例项】
“图例也可以点击，效果等同于点击对应扇区。”

---

## 第3段：最终陷阱（15 秒）

“之前的 Bug 是：搜索与饼图筛选不能双向叠加（先搜再点、或先点再搜都会丢一个条件）。原因是状态用的是扇区索引 `selectedIndex`，搜索后重绘饼图导致索引失效，并且搜索时把选择清空。”

---

## 第4段：修复位置与说明（5 秒）

“我把状态改成按年份值跟踪：新增 `selectedYear`（第 9 行）。
- 点击饼图与图例时，切换 `selectedYear` 而不是只改索引（第 69–74 行、以及第 89–94 行）。
- 选中样式用年份判断：`updateSelection()` 中基于 `d.data.year` 设置类名（第 104–113 行）。
- 过滤逻辑：`filterByYear()` 同时应用搜索与年份（第 115–128 行）。
- 搜索时保留已选年份，并在重绘后根据年份重新定位索引（第 134–143 行之后的搜索事件处理）。这样两种过滤可双向叠加。”

---

## 第5段：本次收获（约 5 秒）

“这次我最大的收获是理解了 D3 的数据绑定和声明式更新。`d3.rollup` 与 `d3.pie` 让分组与几何生成变得简单，我可以把精力放在交互逻辑上。”

---

## 录制小贴士

- 鼠标移动清晰可见
- 每个交互后稍作停顿，给出结果画面
- 语速适中、声音清晰
- 保证饼图与图例在画面内清晰可见
- 录制前先完整跑一遍流程确保一切正常
