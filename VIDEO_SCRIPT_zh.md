# Lab 5 录屏脚本（中文版）

**时长：不超过 1 分钟**

---

## 第1段：展示可视化（15 秒）

“大家好！这是我在 DSC 106 的 Lab 5 作业。我做的是一个基于年份的项目分布饼图。”

【镜头：展示页面中饼图和图例】

“饼图用不同颜色表示不同年份，图例显示每个年份对应的项目数量。”

---

## 第2段：交互演示（25 秒）

“接下来演示交互功能。”

【鼠标悬停在某个扇区】
“当我把鼠标悬停在某个扇区上，其他扇区会变淡，高亮当前扇区。”

【点击某个扇区】
“点击扇区后，下面的项目列表会被过滤，只显示该年份的项目，同时该扇区会用高亮颜色表示已选中。”

【搜索演示】
“现在我在搜索框输入 ‘robotics’。”
【输入并停顿】
“饼图会联动更新，只保留与搜索词匹配的项目；列表也同步过滤。”

【点击图例项】
“图例也可以点击，效果等同于点击对应扇区。”

---

## 第3段：Bug 说明（15 秒）

“不过，这里有个小 Bug：搜索和点击饼图扇区目前不能同时生效。如果我先搜索再点扇区，就只按年份过滤，搜索条件会丢失（反过来也类似）。”

【演示：先搜索，再点扇区】

“原因是：搜索时（第 156 行）会调用 `renderPieChart(filteredProjects)` 重绘饼图；点击扇区时（第 80–83 行）设置 `selectedIndex` 并调用 `filterByYear()`；在 `filterByYear()`（第 133–148 行）里通过 `arcData[selectedIndex].data.year` 读取年份。由于搜索会重绘并重排索引，同时搜索处理里在第 161 行把 `selectedIndex` 重置为 -1，状态不同步，导致两种过滤不能同时保留。”

---

## 第4段：代码位置与修复思路（5 秒）

“修复方法：1）把选择的年份单独存成 `selectedYear`，不要依赖索引；2）在 `filterByYear()`（第 133–148 行）里始终先按搜索再按年份一起过滤；3）搜索处理（第 161 行）在有 `selectedYear` 时不强制清空，或改为基于 `selectedYear` 重新过滤。”

---

## 第5段：本次收获（约 5 秒）

“这次我最大的收获是理解了 D3 的数据绑定和声明式更新。`d3.rollup` 与 `d3.pie` 让分组与几何生成变得简单，我可以把精力放在交互逻辑上。”

---

## 录制小贴士

- 鼠标移动清晰可见
- 每个交互后稍作停顿，给出结果画面
- 语速适中、声音清晰
- 保证饼图与图例在画面内清晰可见
- 录制前先完整跑一遍流程确保一切正常
